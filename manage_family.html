<!DOCTYPE html>
<html>
<head>

	<link href="css/bootstrap.min.css" rel="stylesheet" media="screen" />
	<link rel="stylesheet" type="text/css" href="edit_family.css" />
	<script type="text/javascript" src="external_js/jquery-1.9.0.min.js"></script>
	<script src="external_js/jquery-cookie-master/jquery.cookie.js"></script>
	<script type="text/javascript" src="js/api_client.js"></script>
	<script type="text/javascript" src="js/verify.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/jquery.dotdotdot-1.5.7.js"></script>
	<link rel="stylesheet" type="text/css" href="corkboard_theme.css"/>
	<link rel="stylesheet" type="text/css" href="task_list.css"/>
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
	<script type="text/javascript" src="external_js/jquery-ui-1.10.0.custom.min.js"></script>
	<script type="text/javascript" src="external_js/date.js"></script>
	<script type="text/javascript" src="static_js/task.js"></script>
	<script type="text/javascript" src="static_js/member.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Quicksand' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="task_completion.css" />
	<script type="text/javascript" src="js/manage_family.js"></script>
	
	<script src="js/vendor/jquery.ui.widget.js"></script>
	<script src="js/jquery.iframe-transport.js"></script>
	<script src="js/jquery.fileupload.js"></script>

	<script type="text/javascript">

	    // This allows the Javascript code inside this block to only run when the page
	    // has finished loading in the browser.
	    $(document).ready(function() {
	    
	    var newMemberVisible = false;
	    

	    function newMemberCallback(data) {
			if(data.error == null){
				console.log("posted member");
				console.log(data);
				var id = data._id;
				console.log(id);
				client.getMember(id, function(data){
					console.log("retrieved member");
					console.log(data);
				});
				$("#familyTable tr:first").remove();

			}else{
				console.log(data.error);
			}
	    }

	    function addMember() {
			console.log("--submit Member--");
			var name =  $("#newName").val();
			var pictureURL =  "";
			//THIS IS A FAKE MEMBER. Functions screw up the post
			var member = {'name': name, 'pictureURL':pictureURL};

			client.createMember(member, newMemberCallback);
				
	    }
	    
	    function populatePage(family) {
	    
	    }
	    
	    $("#addMember").click(function() {
	    	// Only do something if row isn't visible yet
	    	if (!newMemberVisible) {
	    
	    	$("#familyMemberList").prepend('<tr><td class="left"><img id="newPic" src="assets/unknown_person.jpg" /></td> <td class="middle"><input id="newName" type="text"></td> <td class="right"><button id="newAddButton" class="btn btn-success btn-mini">Add</btn></td></tr>');
	    	newMemberVisible = true;
	    
	    	$("#newAddButton").click(addMember);
	    	
	    	}
	    });	    	
	    	
	    });
	</script>




	<title>Household Dashboard</title>
</head>
<body>
	<div id="outer">
	<div id="content">
		<div style="position: relative;" id="titleButton">
			<img class="pin_left" src="assets/pushpin.png">
			<h1>Household Dashboard</h1>
		</div>
		<div id="navigation">
			<div class="tabs_container">
				<ul id="tabs">
					<li id="tabTodo">To-Do</li>
					<li id="manageFamily">Manage</li>
				</ul>
			</div>
			<div class="family_container">
				<ul id="family">
					
				</ul>
			</div>
		</div>

		<div id="manageFamily">
			
    
		    <h1>Edit Family</h1>
		    
		    
		    <div id="nameEditor" class="input-append">
		    <input id="familyName" type="text" placeholder="Family Name" />
		    <button id="changeButton" class="btn" type="button">Change</button>
		    <button id="restoreButton" class="btn" type="button">Restore</button>
		    </div>
		    
		    <br>
		    
		    <button id="addMember" class="btn btn-large btn-primary" type="button">Add Family Member</button>
		    
		    <br>
		    
		    <table id="familyTable">
		    <tbody id="familyMemberList">
		    <tr><td class="left"><img id="testPic" src="assets/unknown_person.jpg" /></td> <td class="middle">Test Person</td> <td class="right"><button class="btn btn-danger btn-mini">Delete</btn></td></tr>
		    </tbody>
		    </table>
			
		</div>
	
</body>
</html>
